{% set version = "3.0.1" %}

package:
  name: conda-lock
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/c/conda-lock/conda_lock-{{ version }}.tar.gz
  sha256: 016c3685db7e875c8e3c00380ff3ad9c1ea7314e5310a14fe2822e2881084888

build:
  number: 0
  noarch: python
  script:
    - {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation --disable-pip-version-check
  entry_points:
    - conda-lock = conda_lock:main

requirements:
  host:
    - python {{ python_min }}
    - hatchling
    - hatch-vcs
    - pip
  run:
    - ruamel_yaml
    - python >={{ python_min }}
    - click >=8.0
    - click-default-group
    - ensureconda >=1.4.7
    - filelock
    - gitpython >=3.1.30
    - jinja2
    - packaging >=24.0
    - platformdirs >=3.10.0,<5.0.0
    - pydantic >=2
    - pyyaml >=5.1
    - requests >=2.26,<3.0
    - ruamel.yaml
    - semver >=3,<4
    - setuptools
    - tomli >=2.0.1,<3.0.0
    - tomlkit >=0.11.4,<1.0.0
    - typing_extensions >=4.6.1
    - boltons >=23.0.0
    - charset-normalizer
    - zstandard >=0.15
    - python-build >=1.2.1,<2.0.0
    - cachecontrol >=0.14.0,<0.15.0
    - cachecontrol-with-filecache
    - crashtest >=0.4.1,<0.5.0
    - dulwich >=0.22.6,<0.23.0
    - python-fastjsonschema >=2.18.0,<3.0.0
    - importlib-metadata >=4.4
    - python-installer >=0.7.0,<0.8.0
    - keyring >=25.1.0,<26.0.0
    - pkginfo >=1.12,<2.0
    - pyproject_hooks >=1.0.0,<2.0.0
    - requests-toolbelt >=1.0.0,<2.0.0
    - shellingham >=1.5,<2.0
    - trove-classifiers >=2022.5.19
    - virtualenv >=20.26.6,<21.0.0
    # See https://github.com/conda-forge/poetry-feedstock/blob/main/recipe/meta.yaml
    - xattr >=1.0.0,<2.0.0  # [osx]

    # Keep the package noarch
    # <https://conda-forge.org/docs/maintainer/knowledge_base/#noarch-packages-with-os-specific-dependencies>
    - __linux  # [linux]
    - __osx    # [osx]
    - __win    # [win]
  run_constrained:
    - mamba !=2.0.0,!=2.0.1,!=2.0.2,!=2.0.3,!=2.0.4,!=2.0.5,!=2.0.6

test:
  imports:
    - conda_lock
  commands:
    - pip check
    - conda-lock --help
  requires:
    - pip
    - python {{ python_min }}

about:
  home: https://github.com/conda/conda-lock
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: Lightweight lockfile for conda environments
  description: |
    Conda lock is a lightweight library that can be used to generate fully
    reproducible lock files for conda environments.
    It does this by performing multiple solves for conda targeting a set of
    platforms you desire lockfiles for.
    This also has the added benefit of acting as an external presolve for conda
    as the lockfiles it generates results in the conda solver not being invoked
    when installing the packages from the generated lockfile.
  doc_url: https://conda.github.io/conda-lock/

extra:
  recipe-maintainers:
    - maresb
    - mariusvniekerk
    - ocefpaf
    - bollwyvl
